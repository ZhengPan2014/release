IyEvdXNyL2Jpbi9lbnYgcHl0aG9uCgoiIiJ4bWwyanNvbi5weSAgQ29udmVydCBYTUwgdG8gSlNP
TgoKUmVsaWVzIG9uIEVsZW1lbnRUcmVlIGZvciB0aGUgWE1MIHBhcnNpbmcuICBUaGlzIGlzIGJh
c2VkIG9uCnBlc3RlcmZpc2gucHkgYnV0IHVzZXMgYSBkaWZmZXJlbnQgWE1MLT5KU09OIG1hcHBp
bmcuClRoZSBYTUwtPkpTT04gbWFwcGluZyBpcyBkZXNjcmliZWQgYXQKaHR0cDovL3d3dy54bWwu
Y29tL3B1Yi9hLzIwMDYvMDUvMzEvY29udmVydGluZy1iZXR3ZWVuLXhtbC1hbmQtanNvbi5odG1s
CgpSZXdyaXR0ZW4gdG8gYSBjb21tYW5kIGxpbmUgdXRpbGl0eSBieSBIYXkgS3JhbmVuIDwgZ2l0
aHViLmNvbS9oYXkgPiB3aXRoCmNvbnRyaWJ1dGlvbnMgZnJvbSBHZW9yZ2UgSGFtaWx0b24gKGdt
aDA0KSBhbmQgRGFuIEJyb3duIChqZGFuYnJvd24pCgpYTUwgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBKU09OCjxlLz4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICJlIjogbnVsbAo8
ZT50ZXh0PC9lPiAgICAgICAgICAgICAgICAgICAgICAiZSI6ICJ0ZXh0Igo8ZSBuYW1lPSJ2YWx1
ZSIgLz4gICAgICAgICAgICAgICAiZSI6IHsgIkBuYW1lIjogInZhbHVlIiB9CjxlIG5hbWU9InZh
bHVlIj50ZXh0PC9lPiAgICAgICAgICJlIjogeyAiQG5hbWUiOiAidmFsdWUiLCAiI3RleHQiOiAi
dGV4dCIgfQo8ZT4gPGE+dGV4dDwvYSA+PGI+dGV4dDwvYj4gPC9lPiAiZSI6IHsgImEiOiAidGV4
dCIsICJiIjogInRleHQiIH0KPGU+IDxhPnRleHQ8L2E+IDxhPnRleHQ8L2E+IDwvZT4gImUiOiB7
ICJhIjogWyJ0ZXh0IiwgInRleHQiXSB9CjxlPiB0ZXh0IDxhPnRleHQ8L2E+IDwvZT4gICAgICAg
ICJlIjogeyAiI3RleHQiOiAidGV4dCIsICJhIjogInRleHQiIH0KClRoaXMgaXMgdmVyeSBzaW1p
bGFyIHRvIHRoZSBtYXBwaW5nIHVzZWQgZm9yIFlhaG9vIFdlYiBTZXJ2aWNlcwooaHR0cDovL2Rl
dmVsb3Blci55YWhvby5jb20vY29tbW9uL2pzb24uaHRtbCN4bWwpLgoKVGhpcyBpcyBhIG1lc3Mg
aW4gdGhhdCBpdCBpcyBzbyB1bnByZWRpY3RhYmxlIC0tIGl0IHJlcXVpcmVzIGxvdHMgb2YgdGVz
dGluZwooZS5nLiB0byBzZWUgaWYgdmFsdWVzIGFyZSBsaXN0cyBvciBzdHJpbmdzIG9yIGRpY3Rp
b25hcmllcykuICBGb3IgdXNlCmluIFB5dGhvbiB0aGlzIGNvdWxkIGJlIHZhc3RseSBjbGVhbmVy
LiAgVGhpbmsgYWJvdXQgd2hldGhlciB0aGUgaW50ZXJuYWwKZm9ybSBjYW4gYmUgbW9yZSBzZWxm
LWNvbnNpc3RlbnQgd2hpbGUgbWFpbnRhaW5pbmcgZ29vZCBleHRlcm5hbApjaGFyYWN0ZXJpc3Rp
Y3MgZm9yIHRoZSBKU09OLgoKTG9vayBhdCB0aGUgWWFob28gdmVyc2lvbiBjbG9zZWx5IHRvIHNl
ZSBob3cgaXQgd29ya3MuICBNYXliZSBjYW4gYWRvcHQKdGhhdCBjb21wbGV0ZWx5IGlmIGl0IG1h
a2VzIG1vcmUgc2Vuc2UuLi4KClIuIFdoaXRlLCAyMDA2IE5vdmVtYmVyIDYKIiIiCgppbXBvcnQg
anNvbgppbXBvcnQgb3B0cGFyc2UKaW1wb3J0IHN5cwppbXBvcnQgb3MKZnJvbSBjb2xsZWN0aW9u
cyBpbXBvcnQgT3JkZXJlZERpY3QKCmltcG9ydCB4bWwuZXRyZWUuY0VsZW1lbnRUcmVlIGFzIEVU
CgoKZGVmIHN0cmlwX3RhZyh0YWcpOgogICAgc3RyaXBfbnNfdGFnID0gdGFnCiAgICBzcGxpdF9h
cnJheSA9IHRhZy5zcGxpdCgnfScpCiAgICBpZiBsZW4oc3BsaXRfYXJyYXkpID4gMToKICAgICAg
ICBzdHJpcF9uc190YWcgPSBzcGxpdF9hcnJheVsxXQogICAgICAgIHRhZyA9IHN0cmlwX25zX3Rh
ZwogICAgcmV0dXJuIHRhZwoKCmRlZiBlbGVtX3RvX2ludGVybmFsKGVsZW0sIHN0cmlwX25zPTEs
IHN0cmlwPTEpOgogICAgIiIiQ29udmVydCBhbiBFbGVtZW50IGludG8gYW4gaW50ZXJuYWwgZGlj
dGlvbmFyeSAobm90IEpTT04hKS4iIiIKCiAgICBkID0gT3JkZXJlZERpY3QoKQogICAgZWxlbV90
YWcgPSBlbGVtLnRhZwogICAgaWYgc3RyaXBfbnM6CiAgICAgICAgZWxlbV90YWcgPSBzdHJpcF90
YWcoZWxlbS50YWcpCiAgICBmb3Iga2V5LCB2YWx1ZSBpbiBsaXN0KGVsZW0uYXR0cmliLml0ZW1z
KCkpOgogICAgICAgIGRbJ0AnICsga2V5XSA9IHZhbHVlCgogICAgIyBsb29wIG92ZXIgc3ViZWxl
bWVudHMgdG8gbWVyZ2UgdGhlbQogICAgZm9yIHN1YmVsZW0gaW4gZWxlbToKICAgICAgICB2ID0g
ZWxlbV90b19pbnRlcm5hbChzdWJlbGVtLCBzdHJpcF9ucz1zdHJpcF9ucywgc3RyaXA9c3RyaXAp
CgogICAgICAgIHRhZyA9IHN1YmVsZW0udGFnCiAgICAgICAgaWYgc3RyaXBfbnM6CiAgICAgICAg
ICAgIHRhZyA9IHN0cmlwX3RhZyhzdWJlbGVtLnRhZykKCiAgICAgICAgdmFsdWUgPSB2W3RhZ10K
CiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIGFkZCB0byBleGlzdGluZyBsaXN0IGZvciB0aGlz
IHRhZwogICAgICAgICAgICBkW3RhZ10uYXBwZW5kKHZhbHVlKQogICAgICAgIGV4Y2VwdCBBdHRy
aWJ1dGVFcnJvcjoKICAgICAgICAgICAgIyB0dXJuIGV4aXN0aW5nIGVudHJ5IGludG8gYSBsaXN0
CiAgICAgICAgICAgIGRbdGFnXSA9IFtkW3RhZ10sIHZhbHVlXQogICAgICAgIGV4Y2VwdCBLZXlF
cnJvcjoKICAgICAgICAgICAgIyBhZGQgYSBuZXcgbm9uLWxpc3QgZW50cnkKICAgICAgICAgICAg
ZFt0YWddID0gdmFsdWUKICAgIHRleHQgPSBlbGVtLnRleHQKICAgIHRhaWwgPSBlbGVtLnRhaWwK
ICAgIGlmIHN0cmlwOgogICAgICAgICMgaWdub3JlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRl
c3BhY2UKICAgICAgICBpZiB0ZXh0OgogICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdHJpcCgpCiAg
ICAgICAgaWYgdGFpbDoKICAgICAgICAgICAgdGFpbCA9IHRhaWwuc3RyaXAoKQoKICAgIGlmIHRh
aWw6CiAgICAgICAgZFsnI3RhaWwnXSA9IHRhaWwKCiAgICBpZiBkOgogICAgICAgICMgdXNlICN0
ZXh0IGVsZW1lbnQgaWYgb3RoZXIgYXR0cmlidXRlcyBleGlzdAogICAgICAgIGlmIHRleHQ6CiAg
ICAgICAgICAgIGRbIiN0ZXh0Il0gPSB0ZXh0CiAgICBlbHNlOgogICAgICAgICMgdGV4dCBpcyB0
aGUgdmFsdWUgaWYgbm8gYXR0cmlidXRlcwogICAgICAgIGQgPSB0ZXh0IG9yIE5vbmUKICAgIHJl
dHVybiB7ZWxlbV90YWc6IGR9CgoKZGVmIGludGVybmFsX3RvX2VsZW0ocGZzaCwgZmFjdG9yeT1F
VC5FbGVtZW50KToKCiAgICAiIiJDb252ZXJ0IGFuIGludGVybmFsIGRpY3Rpb25hcnkgKG5vdCBK
U09OISkgaW50byBhbiBFbGVtZW50LgoKICAgIFdoYXRldmVyIEVsZW1lbnQgaW1wbGVtZW50YXRp
b24gd2UgY291bGQgaW1wb3J0IHdpbGwgYmUKICAgIHVzZWQgYnkgZGVmYXVsdDsgaWYgeW91IHdh
bnQgdG8gdXNlIHNvbWV0aGluZyBlbHNlLCBwYXNzIHRoZQogICAgRWxlbWVudCBjbGFzcyBhcyB0
aGUgZmFjdG9yeSBwYXJhbWV0ZXIuCiAgICAiIiIKCiAgICBhdHRyaWJzID0gT3JkZXJlZERpY3Qo
KQogICAgdGV4dCA9IE5vbmUKICAgIHRhaWwgPSBOb25lCiAgICBzdWJsaXN0ID0gW10KICAgIHRh
ZyA9IGxpc3QocGZzaC5rZXlzKCkpCiAgICBpZiBsZW4odGFnKSAhPSAxOgogICAgICAgIHJhaXNl
IFZhbHVlRXJyb3IoIklsbGVnYWwgc3RydWN0dXJlIHdpdGggbXVsdGlwbGUgdGFnczogJXMiICUg
dGFnKQogICAgdGFnID0gdGFnWzBdCiAgICB2YWx1ZSA9IHBmc2hbdGFnXQogICAgaWYgaXNpbnN0
YW5jZSh2YWx1ZSwgZGljdCk6CiAgICAgICAgZm9yIGssIHYgaW4gbGlzdCh2YWx1ZS5pdGVtcygp
KToKICAgICAgICAgICAgaWYga1s6MV0gPT0gIkAiOgogICAgICAgICAgICAgICAgYXR0cmlic1tr
WzE6XV0gPSB2CiAgICAgICAgICAgIGVsaWYgayA9PSAiI3RleHQiOgogICAgICAgICAgICAgICAg
dGV4dCA9IHYKICAgICAgICAgICAgZWxpZiBrID09ICIjdGFpbCI6CiAgICAgICAgICAgICAgICB0
YWlsID0gdgogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UodiwgbGlzdCk6CiAgICAgICAgICAg
ICAgICBmb3IgdjIgaW4gdjoKICAgICAgICAgICAgICAgICAgICBzdWJsaXN0LmFwcGVuZChpbnRl
cm5hbF90b19lbGVtKHtrOiB2Mn0sIGZhY3Rvcnk9ZmFjdG9yeSkpCiAgICAgICAgICAgIGVsc2U6
CiAgICAgICAgICAgICAgICBzdWJsaXN0LmFwcGVuZChpbnRlcm5hbF90b19lbGVtKHtrOiB2fSwg
ZmFjdG9yeT1mYWN0b3J5KSkKICAgIGVsc2U6CiAgICAgICAgdGV4dCA9IHZhbHVlCiAgICBlID0g
ZmFjdG9yeSh0YWcsIGF0dHJpYnMpCiAgICBmb3Igc3ViIGluIHN1Ymxpc3Q6CiAgICAgICAgZS5h
cHBlbmQoc3ViKQogICAgZS50ZXh0ID0gdGV4dAogICAgZS50YWlsID0gdGFpbAogICAgcmV0dXJu
IGUKCgpkZWYgZWxlbTJqc29uKGVsZW0sIG9wdGlvbnMsIHN0cmlwX25zPTEsIHN0cmlwPTEpOgoK
ICAgICIiIkNvbnZlcnQgYW4gRWxlbWVudFRyZWUgb3IgRWxlbWVudCBpbnRvIGEgSlNPTiBzdHJp
bmcuIiIiCgogICAgaWYgaGFzYXR0cihlbGVtLCAnZ2V0cm9vdCcpOgogICAgICAgIGVsZW0gPSBl
bGVtLmdldHJvb3QoKQoKICAgIGlmIG9wdGlvbnMucHJldHR5OgogICAgICAgIHJldHVybiBqc29u
LmR1bXBzKGVsZW1fdG9faW50ZXJuYWwoZWxlbSwgc3RyaXBfbnM9c3RyaXBfbnMsIHN0cmlwPXN0
cmlwKSwgaW5kZW50PTQsIHNlcGFyYXRvcnM9KCcsJywgJzogJykpCiAgICBlbHNlOgogICAgICAg
IHJldHVybiBqc29uLmR1bXBzKGVsZW1fdG9faW50ZXJuYWwoZWxlbSwgc3RyaXBfbnM9c3RyaXBf
bnMsIHN0cmlwPXN0cmlwKSkKCgpkZWYganNvbjJlbGVtKGpzb25fZGF0YSwgZmFjdG9yeT1FVC5F
bGVtZW50KToKCiAgICAiIiJDb252ZXJ0IGEgSlNPTiBzdHJpbmcgaW50byBhbiBFbGVtZW50LgoK
ICAgIFdoYXRldmVyIEVsZW1lbnQgaW1wbGVtZW50YXRpb24gd2UgY291bGQgaW1wb3J0IHdpbGwg
YmUgdXNlZCBieQogICAgZGVmYXVsdDsgaWYgeW91IHdhbnQgdG8gdXNlIHNvbWV0aGluZyBlbHNl
LCBwYXNzIHRoZSBFbGVtZW50IGNsYXNzCiAgICBhcyB0aGUgZmFjdG9yeSBwYXJhbWV0ZXIuCiAg
ICAiIiIKCiAgICByZXR1cm4gaW50ZXJuYWxfdG9fZWxlbShqc29uLmxvYWRzKGpzb25fZGF0YSks
IGZhY3RvcnkpCgoKZGVmIHhtbDJqc29uKHhtbHN0cmluZywgb3B0aW9ucywgc3RyaXBfbnM9MSwg
c3RyaXA9MSk6CgogICAgIiIiQ29udmVydCBhbiBYTUwgc3RyaW5nIGludG8gYSBKU09OIHN0cmlu
Zy4iIiIKCiAgICBlbGVtID0gRVQuZnJvbXN0cmluZyh4bWxzdHJpbmcpCiAgICByZXR1cm4gZWxl
bTJqc29uKGVsZW0sIG9wdGlvbnMsIHN0cmlwX25zPXN0cmlwX25zLCBzdHJpcD1zdHJpcCkKCgpk
ZWYganNvbjJ4bWwoanNvbl9kYXRhLCBmYWN0b3J5PUVULkVsZW1lbnQpOgoKICAgICIiIkNvbnZl
cnQgYSBKU09OIHN0cmluZyBpbnRvIGFuIFhNTCBzdHJpbmcuCgogICAgV2hhdGV2ZXIgRWxlbWVu
dCBpbXBsZW1lbnRhdGlvbiB3ZSBjb3VsZCBpbXBvcnQgd2lsbCBiZSB1c2VkIGJ5CiAgICBkZWZh
dWx0OyBpZiB5b3Ugd2FudCB0byB1c2Ugc29tZXRoaW5nIGVsc2UsIHBhc3MgdGhlIEVsZW1lbnQg
Y2xhc3MKICAgIGFzIHRoZSBmYWN0b3J5IHBhcmFtZXRlci4KICAgICIiIgogICAgaWYgbm90IGlz
aW5zdGFuY2UoanNvbl9kYXRhLCBkaWN0KToKICAgICAgICBqc29uX2RhdGEgPSBqc29uLmxvYWRz
KGpzb25fZGF0YSkKCiAgICBlbGVtID0gaW50ZXJuYWxfdG9fZWxlbShqc29uX2RhdGEsIGZhY3Rv
cnkpCiAgICByZXR1cm4gRVQudG9zdHJpbmcoZWxlbSkKCgpkZWYganNvbjJsYXVuY2goanNvbl9k
YXRhLCBmaWxlcGF0aD0nJywgZXh0ZW5zaW9uPSdsYXVuY2gnKToKICAgIGZvciB0YWcsIHZhbHVl
IGluIGxpc3QoanNvbl9kYXRhLml0ZW1zKCkpOgogICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUs
IGRpY3QpOgogICAgICAgICAgICBqc29uMmxhdW5jaCh2YWx1ZSwgZmlsZXBhdGgsIGV4dGVuc2lv
bikKICAgICAgICAgICAgaWYgdmFsdWUuaGFzX2tleSgnbm9kZScpIG9yIHZhbHVlLmhhc19rZXko
J2luY2x1ZGUnKToKICAgICAgICAgICAgICAgIHZhbHVlWydAbnMnXSA9ICIkKG9wdGVudiAiICsg
dGFnICsgIiAiICsgdGFnICsgIikiCiAgICAgICAgICAgICAgICBpZiBub3QganNvbl9kYXRhLmhh
c19rZXkoJ2dyb3VwJyk6CiAgICAgICAgICAgICAgICAgICAganNvbl9kYXRhWydncm91cCddID0g
W10KICAgICAgICAgICAgICAgIGpzb25fZGF0YVsnZ3JvdXAnXS5hcHBlbmQodmFsdWUpCiAgICAg
ICAgICAgICAgICBkZWwganNvbl9kYXRhW3RhZ10KICAgICAgICAgICAgZWxzZToKICAgICAgICAg
ICAgICAgIHZhbHVlWydAZmlsZSddID0gZmlsZXBhdGggKyAnLycgKyB0YWcgKyBleHRlbnNpb24K
ICAgICAgICAgICAgICAgIGlmIG5vdCBqc29uX2RhdGEuaGFzX2tleSgnaW5jbHVkZScpOgogICAg
ICAgICAgICAgICAgICAgIGpzb25fZGF0YVsnaW5jbHVkZSddID0gW10KICAgICAgICAgICAgICAg
IGpzb25fZGF0YVsnaW5jbHVkZSddLmFwcGVuZCh2YWx1ZSkKICAgICAgICAgICAgICAgIGRlbCBq
c29uX2RhdGFbdGFnXQogICAgICAgIGVsaWYgbm90IGlzaW5zdGFuY2UodmFsdWUsIGxpc3QpOgog
ICAgICAgICAgICBpZiBub3QgdGFnWzoxXSA9PSAiQCI6CiAgICAgICAgICAgICAgICBpZiBub3Qg
anNvbl9kYXRhLmhhc19rZXkoJ2FyZycpOgogICAgICAgICAgICAgICAgICAgIGpzb25fZGF0YVsn
YXJnJ10gPSBbXQogICAgICAgICAgICAgICAganNvbl9kYXRhWydhcmcnXS5hcHBlbmQoeyJAbmFt
ZSI6IHRhZywgIkB2YWx1ZSI6IHZhbHVlfSkKICAgICAgICAgICAgICAgIGRlbCBqc29uX2RhdGFb
dGFnXQogICAgcmV0dXJuIGpzb25fZGF0YQoKCmRlZiBtYWluKCk6CiAgICBwID0gb3B0cGFyc2Uu
T3B0aW9uUGFyc2VyKAogICAgICAgIGRlc2NyaXB0aW9uPSdDb252ZXJ0cyBYTUwgdG8gSlNPTiBv
ciB0aGUgb3RoZXIgd2F5IGFyb3VuZC4gIFJlYWRzIGZyb20gc3RhbmRhcmQgaW5wdXQgYnkgZGVm
YXVsdCwgb3IgZnJvbSBmaWxlIGlmIGdpdmVuLicsCiAgICAgICAgcHJvZz0neG1sMmpzb24nLAog
ICAgICAgIHVzYWdlPSclcHJvZyAtdCB4bWwyanNvbiAtbyBmaWxlLmpzb24gW2ZpbGVdJwogICAg
KQogICAgcC5hZGRfb3B0aW9uKCctLXR5cGUnLCAnLXQnLCBoZWxwPSIneG1sMmpzb24nIG9yICdq
c29uMnhtbCciLCBkZWZhdWx0PSJ4bWwyanNvbiIpCiAgICBwLmFkZF9vcHRpb24oJy0tb3V0Jywg
Jy1vJywgaGVscD0iV3JpdGUgdG8gT1VUIGluc3RlYWQgb2Ygc3Rkb3V0IikKICAgIHAuYWRkX29w
dGlvbigKICAgICAgICAnLS1zdHJpcF90ZXh0JywgYWN0aW9uPSJzdG9yZV90cnVlIiwKICAgICAg
ICBkZXN0PSJzdHJpcF90ZXh0IiwgaGVscD0iU3RyaXAgdGV4dCBmb3IgeG1sMmpzb24iKQogICAg
cC5hZGRfb3B0aW9uKAogICAgICAgICctLXByZXR0eScsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsCiAg
ICAgICAgZGVzdD0icHJldHR5IiwgaGVscD0iRm9ybWF0IEpTT04gb3V0cHV0IHNvIGl0IGlzIGVh
c2llciB0byByZWFkIikKICAgIHAuYWRkX29wdGlvbigKICAgICAgICAnLS1zdHJpcF9uYW1lc3Bh
Y2UnLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgIGRlc3Q9InN0cmlwX25zIiwgaGVscD0i
U3RyaXAgbmFtZXNwYWNlIGZvciB4bWwyanNvbiIpCiAgICBwLmFkZF9vcHRpb24oCiAgICAgICAg
Jy0tc3RyaXBfbmV3bGluZXMnLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgIGRlc3Q9InN0
cmlwX25sIiwgaGVscD0iU3RyaXAgbmV3bGluZXMgZm9yIHhtbDJqc29uIikKICAgIHAuYWRkX29w
dGlvbigKICAgICAgICAnLS1sYXVuY2gnLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgIGRl
c3Q9ImxhdW5jaCIsIGhlbHA9IkZvcm1hdCBsYXVuY2ggZm9yIHhtbDJqc29uIikKICAgIG9wdGlv
bnMsIGFyZ3VtZW50cyA9IHAucGFyc2VfYXJncygpCgogICAgaW5wdXRzdHJlYW0gPSBzeXMuc3Rk
aW4KICAgIGlmIGxlbihhcmd1bWVudHMpID09IDE6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBp
bnB1dHN0cmVhbSA9IG9wZW4oYXJndW1lbnRzWzBdKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAg
ICAgc3lzLnN0ZGVyci53cml0ZSgiUHJvYmxlbSByZWFkaW5nICd7MH0nXG4iLmZvcm1hdChhcmd1
bWVudHNbMF0pKQogICAgICAgICAgICBwLnByaW50X2hlbHAoKQogICAgICAgICAgICBzeXMuZXhp
dCgtMSkKCiAgICBpbnB1dCA9IGlucHV0c3RyZWFtLnJlYWQoKQoKICAgIHN0cmlwID0gMAogICAg
c3RyaXBfbnMgPSAwCiAgICBpZiBvcHRpb25zLnN0cmlwX3RleHQ6CiAgICAgICAgc3RyaXAgPSAx
CiAgICBpZiBvcHRpb25zLnN0cmlwX25zOgogICAgICAgIHN0cmlwX25zID0gMQogICAgaWYgb3B0
aW9ucy5zdHJpcF9ubDoKICAgICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoJ1xuJywgJycpLnJl
cGxhY2UoJ1xyJywnJykKICAgIGlmIChvcHRpb25zLnR5cGUgPT0gInhtbDJqc29uIik6CiAgICAg
ICAgb3V0ID0geG1sMmpzb24oaW5wdXQsIG9wdGlvbnMsIHN0cmlwX25zLCBzdHJpcCkKICAgIGVs
c2U6CiAgICAgICAgaWYgb3B0aW9ucy5sYXVuY2g6CiAgICAgICAgICAgIGlucHV0ID0ganNvbi5s
b2FkcyhpbnB1dCkKICAgICAgICAgICAgcHJpbnQoaW5wdXQpCiAgICAgICAgICAgIGlmIChvcHRp
b25zLm91dCk6CiAgICAgICAgICAgICAgICAoZmlsZXBhdGgsdGVtcGZpbGVuYW1lKSA9IG9zLnBh
dGguc3BsaXQob3B0aW9ucy5vdXQpCiAgICAgICAgICAgICAgICAoc2hvdG5hbWUsZXh0ZW5zaW9u
KSA9IG9zLnBhdGguc3BsaXRleHQodGVtcGZpbGVuYW1lKQogICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgZXh0ZW5zaW9uID0gJ2xhdW5jaCcKICAgICAgICAgICAgaW5wdXQgPSBqc29u
MmxhdW5jaChpbnB1dCwgZmlsZXBhdGgsIGV4dGVuc2lvbikKICAgICAgICAgICAgcHJpbnQoaW5w
dXQpCiAgICAgICAgICAgIGlucHV0ID0geydsYXVuY2gnOiBpbnB1dH0KICAgICAgICBvdXQgPSBq
c29uMnhtbChpbnB1dCkKCiAgICBpZiAob3B0aW9ucy5vdXQpOgogICAgICAgIGZpbGUgPSBvcGVu
KG9wdGlvbnMub3V0LCAndycpCiAgICAgICAgZmlsZS53cml0ZShvdXQpCiAgICAgICAgZmlsZS5j
bG9zZSgpCiAgICBlbHNlOgogICAgICAgIHByaW50KG91dCkKCmlmIF9fbmFtZV9fID09ICJfX21h
aW5fXyI6CiAgICBtYWluKCkKCg==
